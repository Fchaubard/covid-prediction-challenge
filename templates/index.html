<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="initial-scale=1, shrink-to-fit=no, width=device-width" name="viewport">
  <title>COVID-19 Prediction Challenge</title>
  <link rel="icon" type="image/png" href="/static/images/favicon.ico" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i|Roboto+Mono:300,400,700|Roboto+Slab:300,400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css" integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <link href="  https://pagination.js.org/dist/2.0.7/pagination.css" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124148774-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-124148774-3');
  </script>

<style>
  a {color:#FF8484 }
  .primary-bg{
    background-color:rgb(53, 35, 74)
    }
  .header{
    background-color: #D84C73; 
    display: flex;
    align-items: center;
    justify-content: center;
    }
  .row{
    margin:0
    }
  .column{
    flex-direction:column
    }
.pagination li {
  padding:5px;
  margin: 3px;
}
.pagination{
  display: flex;
  align-items: center;
  justify-content: center;
}
  </style>
</head>

<!-- Navbar -->
<section>
<nav class="navbar navbar-expand-lg navbar-dark primary-bg">
  <a class="navbar-brand" style="width:150px" href="#">
    <img class="w-100" style="padding:10px" src="static/images/logo_light.png">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#how_this_works">How this Works</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#getting_started">Getting Started</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#submissions">Submissions</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#leaderboard">Leaderboards</a>
      </li>
    </ul>
  </div>
</nav>
</section>
<!-- Navbar End -->

<!-- Body -->
<body>
  <div class="container">
    <nav class="navbar navbar-light bg-light mb-3">
      <div class="d-flex align-items-center">
        <div class="input-group mr-5">
          <div class="input-group-prepend">
            <label class="input-group-text" for="place">Place</label>
          </div>
          <select class="custom-select" id="place">
          </select>
        </div>
        <div class="custom-control custom-checkbox mr-5">
          <input type="checkbox" class="custom-control-input" id="logOption">
          <label class="custom-control-label" for="logOption">Log</label>
        </div>
        <div class="custom-control custom-checkbox">
          <input type="checkbox" class="custom-control-input" id="dydxOption">
          <label class="custom-control-label" for="dydxOption">dy/dx</label>
        </div>
      </div>
    </nav>
    <div class="row">
      <div class="col-12 col-md-4">
        <h6>Leaderboard</h6>
        <div class="list-group leaderboard"></div>
      </div>
      <div class="col-12 col-md-8" id="chart" height="500"></div>
    </div>
  </div>

<!-- Leaderboard Section -->
<!-- 
<section class="mt-4">
  <div class="col-sm-12">
    <div class="card">
      <div class="header">
        <h4 class="card-title m-0 p-2 text-white font-weight-bold text-uppercase">COVID-19 Prediction Challenge Leaderboard</h4>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-sm-6">
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Name</th>
                  <th scope="col">LinkedIn</th>
                  <th scope="col">Github</th>
                  <th scope="col">Score</th>
                </tr>
              </thead>
              <tbody id="leaderboard_tbody">
                <tr>
                  <th scope="row">1</th>
                  <td>Francois Chaubard</td>
                  <td></td>
                  <td><a href="https://github.com/Fchaubard/covid-prediction-challenge/blob/master/templates/ipython/predict%20covid-19.ipynb">Code</a></td>
                  <td>864.6 RMSE</td>
                </tr>
                <tr>
                  <th scope="row">2</th>
                  <td>Tony Conti</td>
                  <td></td>
                  <td><a href="https://github.com/Fchaubard/covid-prediction-challenge/blob/master/templates/ipython/predict%20covid-19.ipynb">Code</a></td>
                  <td>4001.2 RMSE</td>
                </tr>
              </tbody>
            </table>  
          </div>
          <div class="col-sm-6">
            <div id="leaderboard-plot" style="width:100%"></div>
          </div>
        </div>      
      </div>
    </div>
  </div>
</section> -->
<!-- Leaderboard Section End-->


<section class="mt-4">
  <div class="col-sm-6"  id='fileList' >
    <div class="card">
      <div class="header">
        <h4 class="card-title m-0 p-2 text-white font-weight-bold text-uppercase">Global COVID-19 Data (Infections, Recoveries, Deaths)</h4>
      </div>
      <div class="card-body">
        <p>All truth data is accessible and is updated nightly on a cron at 2am. This is what will be used as truth.</p>
        <div class="row column justify-content-center align-items-center">
          <div class="col-sm-12">
            <input type="text" class="fuzzy-search w-100" placeholder="Search..." />
            <div class="d-flex justify-content-between align-items-center" style="width:100%;padding: 10px; background-color: #5C3B6F; color:white">
              <p class="name" style="text-align:center; margin-bottom:0; margin:0px; width:50%">DATE</p>
              <p class="name" style="text-align:center; margin-bottom:0; margin:0px; width:50%">LINK</p>
          </div>
            <ul class="list-group list" id='' style="cursor:pointer; padding-top:0px"></ul>
            <ul class="pagination"></ul>
          </div>
        </div>      
      </div>
    </div>
  </div>
</section>


<div class="mt-4 container-fluid">
<h1>COVID-19 Prediction Challenge</h1>
<div class="col-lg-auto col-lg-auto col-6-auto">
Right now, it is extremely difficult to know the difference between outlandish, modest, politically motivated, financially motivated, plain lazy, or useless predictions on the effects of COVID-19 on the planet. There are predictions saying that it will infect 40% of the world, 70% of the world, and some play it really safe and say <a href="https://thehill.com/changing-america/well-being/prevention-cures/482794-officials-say-the-cdc-is-preparing-for"> 40-70% of the world </a>. The first 2 are wildly different but specific enough to be useful, the last is so broad it is not useful, this imputes a variance of 2.3 billion people?! We can not be more precise than that? Lets see..<br/><br/>

Other forecasts report DRAMATICALLY less severe outcomes, including <a href="https://www.latimes.com/science/story/2020-03-22/coronavirus-outbreak-nobel-laureate?fbclid=IwAR3ztFYp7WVi2py5NYv8vwHRg6lMx6j5cfCsaQMRmbuAFCUBuULwQhnXHsk">this nobel laureate</a>. <br/><br/>

They and many, many others are reporting forecasts. Some may be right, some may be wrong, some, as <a href="https://www.cnn.com/2020/03/22/world/doomsday-prophets-coronavirus-blake/index.html"> CNN reports </a>, are simply dangerous, some are backed with clear data and scientific rigor (i.e.<a href="https://www.imperial.ac.uk/media/imperial-college/medicine/sph/ide/gida-fellowships/Imperial-College-COVID19-NPI-modelling-16-03-2020.pdf"> here </a> is the article that convinced Trump to begin suppression, <a href="https://covidactnow.org/"> here is my personal favorite right now</a>, and <a href='https://github.com/daveselinger/covid-19-hackathon'>here</a>, <a href='https://github.com/coronafighter/coronaSEIR'>here</a>, <a href='https://midasnetwork.us/covid-19/'>here</a> , and <a href='https://github.com/HopkinsIDD/ncov_incubation'>here</a> are many others), but who is right? They all made many assumptions as all predictions must, they modeled it one way or another, some will be more right than others. So who to listen to given the wild variance in predicted outcomes?
<br/><br/>
The world needs accurate COVID-19 infection/death models so that people can make informed decisions about how to react to the new realities around them. If you knew with 80% probability your grandmother was going to die in June, 2020, would you change something about your life? Would you tell her with confidence to do something different? Or if you knew that with 0.3% probability that she would die in June 2020, would that change your answer? If there is a difference, then that proves this initiative's worth. 
<br/><br/>
As an AI worker, there is only so much that I can do to help this crisis. I am not a pathologist asdf , I am not an epidemiologist, I am not a nurse, and I’m not a doctor. I know how to take large amounts of data, train models that will be robust enough to predict the future with some confidence interval based on a lot of best practices in Machine Learning. A useful thing I may be able to do is to provide a prediction that approaches the Shannon Bound for what is going to happen, how many people will die, when, where, and who. While this is horrible to consider, this is very useful for a number of reasons in my point of view. 
<br/><br/>
<ul>
<li>First, we will be able to react and change our lives conditioned upon this information. </li>
<li>Second, we will be able to trust a prediction and avoid overstatements/overreactions and understatements/underreactions of what will happen. </li>
<li>Third, perhaps government officials, health workers, etc will be able to use the community's models to triage and rank sort key areas and people that need resources, attention, and to be quarantined first. </li>
<li>Last, and probably least, there is no downside / risk to this. Even if the above benefits do not happen, doing nothing feels worse than doing something that may or may not serve some use to the world, so via pascal's wager, lets contribute and lets use AI / datascience to help bring clarity to the complexity like we know how! </li>
</ul>
Predicting deaths and number of sick people is an unfortunate reality, but it must be done. These are real people with real life and real families not data points on a plot. But for the world to know how to react they must TRUST the predictions of the future, and right now in the post fact era people are too skeptical of sensationalism to sell ads, politicians spinning things to overstate how great a job they are doing, fake news published by foreign entities, etc. We need predictions from experts controlled for any potential bias, pitted against each other on a nowcasting challenge, where each person's models have been forcibly submitted weeks/months in advance, so you can clearly see which projections are worth their salt. This project seeks to fill this gap, by offering a framework for us to decipher how much better one prediction is from the other.

For those of you like me who want to help this cause with their skill set please contribute a prediction. 

<h1 id="how_this_works">How this works</h1>
In science, it is control and careful analysis that allow us to know anything with any amount of certainty. That is what this project offers. 

The way we will do this is the following:
1. Every night the world health organization and many other health organizations publish their data online. John Hopkins University scraped this data and made it available by their APIs. 
2. We will pull that data every night and measure the accuracy of all the submissions against that day and the previous days. 
3. In order to prevent an unfair advantage of the natural autoregressive properties of the dependent variables, we do not score the first week of any submission and certainly not days before the submission date. Thus, we will not calculate and you will not see your scores until a week after the submission date. Thereafter, you will see your scores update at 2am every night.
4. We will rank and publish the full report of the top 10 submissions that will change daily.
 <h1 id="getting_started">Getting started</h1>
Getting started is very easy. We provide a starter <a href="https://github.com/Fchaubard/covid-prediction-challenge/blob/master/templates/ipython/predict%20covid-19.ipynb">ipython notebook</a> that will download all the most recent data and create a naïve predictions.csv that you can drag and drop into the submit form. This is only a helper script and not required to be used at all. 
A predictions.csv must initially include the following columns: date (YYYY/MM/DD) starting a week after submission date (all previous dates/rows will be ignored anyway), # of people infected globally, and death rate globally. Then later if people are using this, we can add country level predictions, and age level predictions. We will report scores for all submissions above a certain accuracy. 

In the submit prediction form, you can submit the csv, name of submitter, and optionally add a github link / ipython nb. 

<h1 id="submissions">Submissions</h1>

<form>
  <div class="form-group">
    <label for="exampleInputEmail1">Email address</label>
    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">Github Repo / Website</label>
    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
  </div>
  <div class="form-group">
    <label for="exampleFormControlFile1">Example file input</label>
    <input type="file" class="form-control-file" id="exampleFormControlFile1">
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>


<h1>Contributing to the Core Project</h1>
If you would like to help on this project or you have any questions, please send a note to fchaubard [[at]] gmail.com. 
</div>
</div>



<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
<script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js" integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9" crossorigin="anonymous"></script>
<script src="https://pagination.js.org/dist/2.1.5/pagination.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
<script>

// $(document).ready(function() {
//   $.get('/get/files', function (response) {
//     var values
//     var options = {
//         valueNames: ['name', 'link'],
//         item: `<li class="list-group-item" style="padding:0; display:flex; border-right: solid 1px #5C3B6F; border-bottom: solid 1px #5C3B6F; border-left: solid 1px #5C3B6F;padding: 10px">
//                 <div class="d-flex justify-content-center align-items-center" style="width: 100%; margin:0">
//                   <p class="name" style="text-align:center; margin:0; width:50%"></p>
//                 <div class="link w-50 text-center"></div>
//               </div>
//               </li>`,
//         pagination: true,
//         page: 10,
//     };

//     var fileList = new List('fileList', options, values);


//     $.each(JSON.parse(response).files, function (k, file) {
//       fileList.add({
//               name: file.slice(0,10).replace("-", "/").replace("-", "/"),
//               link: `<a style="margin:0" href="data/csse_covid_19_data/csse_covid_19_daily_reports/${file}">Download</a>`
//       })
//     })
//     // $(".pagination").find("li").addClass("page-item")
//     // $(".pagination").find("a").addClass("page-link")
//   })
// })


// //Changing nav item to active when selected
// $(".nav-item").click(function() {
//   $(".nav-item").removeClass("active")
//   $(this).addClass("active")
// })


// //Plotly Leaderboard
// trace1 = {
//   type: 'scatter',
//   x: ['1/22/20','1/23/20','1/24/20','1/25/20','1/26/20','1/27/20','1/28/20','1/29/20','1/30/20','1/31/20','2/1/20','2/2/20','2/3/20','2/4/20','2/5/20','2/6/20','2/7/20','2/8/20','2/9/20','2/10/20','2/11/20','2/12/20','2/13/20','2/14/20','2/15/20','2/16/20','2/17/20','2/18/20','2/19/20','2/20/20','2/21/20','2/22/20','2/23/20','2/24/20','2/25/20','2/26/20','2/27/20','2/28/20','2/29/20','3/1/20','3/2/20','3/3/20','3/4/20','3/5/20','3/6/20','3/7/20','3/8/20','3/9/20','3/10/20','3/11/20','3/12/20','3/13/20','3/14/20','3/15/20','3/16/20','3/17/20','3/18/20','3/19/20','3/20/20','3/21/20','3/22/20','3/23/20','3/24/20','3/25/20','3/26/20','3/27/20','3/28/20','3/29/20'],
//   y: [17,18,26,42,56,82,131,133,171,213,259,362,426,492,564,634,719,806,906,1013,1113,1118,1371,1523,1666,1770,1868,2007,2122,2247,2251,2458,2469,2629,2708,2770,2814,2872,2941,2996,3085,3160,3254,3348,3460,3558,3802,3988,4262,4615,4720,5404,5819,6440,7126,7905,8733,9867,11299,12973,14651,16505,18625,21181,23970,27198,30652,33925],
//   mode: 'markers',
//   name: 'WHO Truth Data',
//   marker: {
//     color: 'rgba(156, 165, 196, 0.95)',
//     // line: {
//     //   color: 'rgba(156, 165, 196, 1.0)',
//     //   width: 1,
//     // },
//     symbol: 'circle',
//     size: 16
//   }
// };

// trace2 = {
//   type: 'scatter',
//   x: ['1/22/20','1/23/20','1/24/20','1/25/20','1/26/20','1/27/20','1/28/20','1/29/20','1/30/20','1/31/20','2/1/20','2/2/20','2/3/20','2/4/20','2/5/20','2/6/20','2/7/20','2/8/20','2/9/20','2/10/20','2/11/20','2/12/20','2/13/20','2/14/20','2/15/20','2/16/20','2/17/20','2/18/20','2/19/20','2/20/20','2/21/20','2/22/20','2/23/20','2/24/20','2/25/20','2/26/20','2/27/20','2/28/20','2/29/20','3/1/20','3/2/20','3/3/20','3/4/20','3/5/20','3/6/20','3/7/20','3/8/20','3/9/20','3/10/20','3/11/20','3/12/20','3/13/20','3/14/20','3/15/20','3/16/20','3/17/20','3/18/20','3/19/20','3/20/20','3/21/20','3/22/20','3/23/20','3/24/20','3/25/20','3/26/20','3/27/20','3/28/20','3/29/20','3/30/20','3/31/20','4/1/20','4/2/20','4/3/20','4/4/20','4/5/20','4/6/20','4/7/20','4/8/20','4/9/20','4/10/20','4/11/20','4/12/20','4/13/20','4/14/20','4/15/20','4/16/20','4/17/20','4/18/20','4/19/20','4/20/20','4/21/20','4/22/20','4/23/20','4/24/20','4/25/20','4/26/20','4/27/20','4/28/20','4/29/20','4/30/20','5/1/20','5/2/20','5/3/20','5/4/20','5/5/20','5/6/20','5/7/20','5/8/20','5/9/20','5/10/20','5/11/20','5/12/20','5/13/20','5/14/20','5/15/20','5/16/20','5/17/20','5/18/20','5/19/20','5/20/20','5/21/20','5/22/20','5/23/20','5/24/20','5/25/20','5/26/20','5/27/20','5/28/20','5/29/20','5/30/20','5/31/20','6/1/20','6/2/20','6/3/20','6/4/20','6/5/20','6/6/20','6/7/20','6/8/20','6/9/20','6/10/20','6/11/20','6/12/20','6/13/20','6/14/20','6/15/20','6/16/20','6/17/20','6/18/20','6/19/20','6/20/20','6/21/20','6/22/20','6/23/20','6/24/20','6/25/20','6/26/20','6/27/20','6/28/20','6/29/20','6/30/20','7/1/20','7/2/20','7/3/20','7/4/20','7/5/20','7/6/20','7/7/20','7/8/20','7/9/20','7/10/20','7/11/20','7/12/20','7/13/20','7/14/20','7/15/20','7/16/20','7/17/20','7/18/20','7/19/20','7/20/20','7/21/20','7/22/20','7/23/20','7/24/20','7/25/20','7/26/20','7/27/20','7/28/20','7/29/20','7/30/20','7/31/20','8/1/20','8/2/20','8/3/20','8/4/20','8/5/20','8/6/20','8/7/20','8/8/20'],
//   y: [27,30,33,37,41,46,51,57,63,70,78,87,97,107,119,133,147,164,182,202,225,250,277,308,342,380,422,469,521,579,643,715,794,882,980,1088,1209,1343,1492,1657,1841,2045,2271,2523,2802,3113,3458,3841,4266,4739,5263,5846,6494,7213,8012,8899,9884,10978,12193,13543,15041,16705,18553,20605,22883,25413,28222,31340,34802,38644,42909,47643,52897,58727,65196,72372,80333,89162,98953,109808,121840,135175,149949,166314,184434,204491,226683,251228,278363,308344,341452,377990,418284,462688,511578,565358,624456,689326,760441,838300,923413,1016307,1117513,1227563,1346979,1476263,1615886,1766276,1927798,2100743,2285311,2481591,2689549,2909008,3139638,3380948,3632273,3892781,4161473,4437191,4718639,5004402,5292973,5582784,5872240,6159754,6443780,6722850,6995597,7260786,7517326,7764293,8000928,8226644,8441022,8643803,8834875,9014259,9182097,9338630,9484185,9619158,9743996,9859185,9965240,10062686,10152056,10233881,10308680,10376960,10439207,10495887,10547442,10594290,10636822,10675405,10710379,10742062,10770745,10796698,10820169,10841387,10860560,10877878,10893516,10907633,10920372,10931867,10942236,10951587,10960019,10967621,10974474,10980651,10986218,10991234,10995753,10999825,11003494,11006798,11009775,11012456,11014871,11017046,11019004,11020768,11022356,11023787,11025075,11026234,11027279,11028219,11029066,11029828,11030514,11031132,11031689,11032190,11032641,11033047],
//   mode: 'lines',
//   name: 'Most Accurate Prediction',
//   line: {
//     color: '#5C3B6F',
//     width: 2
//   }
// };

// var layout = {
// 	title: 'Global Deaths: Truth vs. Prediction',
//   	responsive: true,
//   	hovermode: 'closest',
//   	legend: {
// 	    font: {
// 	      size: 10,
// 	    },
//     yanchor: 'middle',
//     xanchor: 'right',
//   	},
// };

// var data = [trace1,trace2];

// Plotly.newPlot('leaderboard-plot', data, layout);

// // Leaderboard tbody
// $(document).ready(function () {
//     $.getJSON('./data/leaderboard.json',
//     function (json) {
//         var tr;
//         for (var i in json) {
//             tr = $('<tr/>');
//             tr.append("<td>" + json[i].email_address + "</td>");
//             tr.append("<td>" + json[i].github_link + "</td>");
//             tr.append("<td>" + json[i].linkedin_link + "</td>");
//             tr.append("<td>" + json[i].scores.World + "</td>");
//             $('leaderboard_tbody').append(tr);
//         }
//     });
// });

</script>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<!-- <script src="{{ url_for('static', filename="js/utils.js")}}"></script> -->
<!-- 
<script>
const csv = text => text.split('\n').map(line => line.split(','));

const formatSnakeCase = text => {
  let formattedText = text.replace(/_/g, ' ');
  return formattedText[0].toUpperCase() + formattedText.substr(1);
}


const loadAllData = () => Promise.all([
  fetch('{{ url_for('static', filename='images/data/leaderboard.json')}}').then(response => response.json()),
  fetch('{{ url_for('static', filename='images/data/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv')}}').then(response => response.text()).then(csv)
]).then(([leaderboard, globalDeaths]) => {
  return Promise.all(
    Object.keys(leaderboard)
      .map(key => 
        fetch(`{{url_for('static',filename='images/data/')}}google_storage_data/predictions/${key}/predictions.csv`)
          .then(response => response.text())
          .then(csv)
      )
  ).then(responses => {
    Object.keys(leaderboard).forEach((key, index) => {
      leaderboard[key].predictions = responses[index].splice(1);
    })

    return {
      leaderboard,
      globalDeaths: globalDeaths.map(r => r[0] === 'WORLD' ? ['World', ...r.slice(1)] : r),
      places: globalDeaths.map(r => r[0] === 'WORLD' ? 'World' : r[0]).slice(1).sort()
    }
  })
});

const getLeaderboardChildren = () => Array.from(document.querySelector(selectors.leaderboard).children)

const getFilteredByPlaceLeaderborardsKeys = () => {
  const { place } = getOptions();
  return Object.keys(data.leaderboard)
    .filter(key => data.leaderboard[key].scores[place])
}

const getLeaderboardEntries = (leaderboardKeys) => {
  const { place } = getOptions();
  return leaderboardKeys
    .map(key => ({
      id: key,
      ...data.leaderboard[key]
    }))
    .sort((a, b) => {
      if (a.scores[place] < b.scores[place]) {
        return 1;
      } else if (a.scores[place] > b.scores[place]) {
        return -1;
      }

      return 0;
    })
}

const render = () => {
  renderLeaderboard();
  plotChat();
}

const getOptions = () => {
  const placeInput = document.querySelector(selectors.placeInput);
  const placeOption = placeInput.options[placeInput.selectedIndex];
  return {
    place: placeOption ? placeOption.value : defaultSelectedPlace,
    log: document.querySelector(selectors.logOptionInput).checked,
    dydx: document.querySelector(selectors.dydxOptionInput).checked
  }
}
</script>
 -->
<script src="{{ url_for('static', filename="js/utils.js")}}?dev=0"></script>
<script src="{{ url_for('static', filename="js/chart.js")}}"></script>
<script src="{{ url_for('static', filename="js/handlers.js")}}"></script>
<script src="{{ url_for('static', filename="js/rendering.js")}}"></script>
<script src="{{ url_for('static', filename="js/app.js")}}"></script>
</body>
<!-- Body End -->
</html>